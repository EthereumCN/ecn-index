{"componentChunkName":"component---src-template-article-js","path":"/geth-security-release/","result":{"data":{"strapiArticles":{"title":"GETH发布最新修复版本","summary":"请节点立即升级至 Geth `v1.9.24 `版本，或使用 Go `1.15.5 ` 及以上版本","publishDate":"2020-11-13","author":"Geth team","authorImg":{"childImageSharp":{"fixed":{"src":"/static/676a537b363780f91da41c1023eece5e/497c6/3e3d541e5581cd1350db5a9ec8c99b51.png"}}},"content":"请节点立即升级至 Geth `v1.9.24`版本，或使用 Go `1.15.5` 及以上版本\n\n来源 | [Ethereum Blog ](https://blog.ethereum.org/2020/11/12/geth_security_release/)\n\n<br/>\n\n# 提要\n\n使用Go`<1.15.5`或`<1.14.12`构建的`geth` 版本很可能受到严重安全漏洞 (DoS) 的影响。Golang团队已将此漏洞注册为“ CVE-2020-28362”。\n\n我们建议所有用户使用Go `1.15.5` or `1.14.12`重建客户端 (最好是`v1.9.24`版本)，以避免节点崩溃。另外，如果你运行的是官方程序，我们发布了基于Go `1.15.5`的Geth `v1.9.24`版本。(Release: https://github.com/ethereum/go-ethereum/releases/tag/v1.9.24)\n\nDocker映像很可能由于缺少基本映像过期，可以查看此处说明使用Go`1.15.5`临时构建映像。请运行`geth version`来验证你的程序所使用的Go版本。\n\n<br/>\n\n# 背景\n\n在十月初，go-ethereum加入了Google的[OSS-Fuzz](https://oss-fuzz.com/)计划。我们曾经临时执行过模糊测试，并测试了一些不同的平台。\n\n10月24日，其中一个测试工具发现了一处崩溃。\n\n经调查，发现问题的根本原因是Go标准库中的漏洞，并且该问题已经被上报。\n\n<br/>\n\n# 影响\n\n在区块处理过程中，利用DoS漏洞可以使所有Geth节点崩溃，随之而来的后果就是以太坊网络中的大部分节点掉线。\n\n除了Go-Ethereum之外，这个问题还有很大可能影响所有Geth的分叉 (例如TurboGeth或是ETC使用的core-geth)。为了扩大调查范围，我们会继续回溯代码，Go团队也已经对潜在受影响的使用者展开了调查。\n\n<br/>\n\n# 事件时间线\n\n- 2020-10-24: 接收来自OSS-fuzz的崩溃报告\n- 2020-10-25: 经调查发现起因是Go语言的漏洞。细节报告已经发送至[security@golang.org](mailto:security@golang.org)\n- 2020-10-26: 收到确认反馈，继续进行调查\n- 2020-10-26 – 2020-11-06: 讨论可能修复方案，继续回溯调查潜在受影响的使用者\n- 2020-11-06: Go暂定2020-11-12发布漏洞修复\n- 2020-11-09: Go预宣布安全补丁：https://groups.google.com/g/golang-announce/c/kMa3eup0qhU/m/O5RSMHO_CAAJ\n- 2020-11-11: 通过Geth的官方[twitter](https://mobile.twitter.com/go_ethereum/status/1326448260949684228)、Discord以及[Reddit](https://www.reddit.com/r/ethereum/comments/js4sk2/security_go_v1155_is_coming_tomorrow_a_security/?utm_source=share&utm_medium=web2x&context=3)通知用户\n- 2020-11-12: 发布新的Go版本，以及`geth`新版本其他问题\n\n<br/>\n\n# 挖矿漏洞\n\n这个PR提交了另一个安全问题，引起了我们的注意，其中包含对ethash算法的修复。\n\n该挖矿漏洞可能导致矿工在未来的epoch中错误地计算工作量证明。ETC链已经在2020-11-06发生了这个问题。预计这可能将在2021年1月上旬在区块高度`11550000` / epoch `385`处对ETH主网产生影响。\n\n这个问题也在`v1.9.24`版本中得到了修复，此漏洞只与矿工节点相关，非矿工节点不受影响。\n\n## Geth的浅拷贝漏洞\n\n受影响版本: `1.9.7` – `1.9.16`\n\n修复: `1.9.17`\n\n类型: 共识漏洞\n\n2020年7月15日, John Youngseok Yang (Software Platform Lab) 报告了Geth中的一个共识漏洞。\n\nGeth预编译的`dataCopy（0x00 ... 04）`合约在调用时进行了浅拷贝，而Parity则进行了深拷贝。攻击者可以部署这样的合约：\n\n- 在EVM内存区`R`写入`X`\n- 使用`R`作为参数调用`0x00..04`\n- 使用`R` 覆盖 `Y`\n- 最后调用`RETURNDATACOPY`操作码\n- 调用该合约时，Parity会在EVM栈中push `X`，而Geth会push `Y`\n\n###  结果\n\n这发生在以太坊主网区块高度 [11234873](https://etherscan.io/block/11234873) 处的交易 [0x57f7f9](https://etherscan.io/tx/0x57f7f9ec3cd92a908ac05edcb372bf6bb984fec6010a360eab76613fbf3bb23f)，导致节点掉线，约30个区块在侧链丢失。这也导致了Infura掉线，继而对使用Infura的用户和服务商造成了影响。\n\n更多细节请参阅[Geth](https://gist.github.com/karalabe/e1891c8a99fdc16c4e60d9713c35401f)和[Infura](https://blog.infura.io/infura-mainnet-outage-post-mortem-2020-11-11/)的事件报告，以及此[系列推文](https://twitter.com/jinglanw/status/1326651349912719360?s=21)。\n\n## `16` 和 `.17` 版本中的DoS漏洞\n\n受影响版本: `v1.9.16`,`v1.9.17`\n\n修复: `v1.9.18`\n\n类型: 区块处理期间的DoS漏洞\n\n我们发现了一个DoS漏洞，并且在`v1.9.18`中进行了修复。我们决定不在这个时间点公布细节。\n\n<br/>\n\n# 建议\n\n短期内，我们建议所有用户立即将Geth升级到`v1.9.24`版本 (Go `1.15.5`)，此处是官方Release: https://github.com/ethereum/go-ethereum/releases/tag/v1.9.24\n\n如果你是通过Docker使用Geth，那可能会出现一些问题。如果是`ethereum/client-go`，需要注意两件事：\n\n1. Docker hub中的新映像可能会延迟\n2. 如果Go的基础映像没那么快创建的话，则很有可能是基于Go的漏洞版本创建的\n\n如果你打算自己创建docker映像 (通过repository root中的`docker build .`)，也可能会遇到第二个问题。\n\n因此，请确保基础映像使用的是Go `1.15.5`。\n\n长期来说，我们建议用户和矿工使用备选客户端。我们强烈认识到以太坊网络要保持韧性，就不能依赖单一的客户端实现。其他客户端选择还有 [Besu](https://github.com/hyperledger/besu/)、[Nethermind](https://github.com/NethermindEth/nethermind)、[OpenEthereum](https://github.com/openethereum/openethereum) 和 [TurboGeth](https://github.com/ledgerwatch/turbo-geth) 等等。\n\n大家可以通过 [https://bounty.ethereum.org](https://bounty.ethereum.org/)、[bounty@ethereum.org](mailto:bounty@ethereum.org) 或 [security@ethereum.org](mailto:security@ethereum.org) 报告安全漏洞。\n\n<br/>\n\n<br/>\n\n声明：ECN的翻译工作旨在为中国以太坊社区传递优质资讯和学习资源，文章版权归原作者所有，转载须注明原文出处以及ethereum.cn，若需长期转载，请联系ethereumcn@gmail.com进行授权。","cover":{"childImageSharp":{"resize":{"src":"/static/61fa6edca7cb80c0a5c00fee68c6bbde/497c6/47a818a3848aff1f20c6de1c4f2cd625.png"}}}},"site":{"siteMetadata":{"title":"Ethereum Community Network","description":"以太坊——全球的、开源的去中心化应用平台。DeFi？NFT？游戏？虚拟世界？每一个人都可以成为以太坊的开发者和用户！","author":"@ECN以太坊社区网络","keywords":"以太坊,以太坊中国,Ethereum","siteLanguage":"zh-CN","siteLocale":"zh-cn","siteUrl":"http://ethereum.cn","twitterUsername":"@EthereumCN"}}},"pageContext":{"id":"Articles_165"}},"staticQueryHashes":["1238767529","2940180826"]}