{"componentChunkName":"component---src-template-article-js","path":"/wnie2-2020-8-22","result":{"data":{"strapiArticles":{"title":"ETH2进展更新（截至2020/8/22）","summary":"Medalla事件回顾和现状；信标链发布前的准备工作","publishDate":"2020-08-24","author":"Ben Edgington","authorImg":{"childImageSharp":{"fixed":{"src":"/static/64988ed2b203b1fa0319cf09a1f7b233/eed38/21639b4d3c2f361c738a2f40035bcddc.png"}}},"content":"来源| [What’s New in Eth2](https://hackmd.io/@benjaminion/eth2_news/https%3A%2F%2Fhackmd.io%2F%40benjaminion%2Fwnie2_200808)\n\n\n\n <br/>\n\n# 测试网覆辙\n\nMedalla信标链测试网的情况一直不太稳定。上周我总结了一篇[最初的事件回顾](https://hackmd.io/@benjaminion/wnie2_200817)，如果有的读者不清楚发生了什么可以先阅读一下。Prysm团队也已经发布了他们[详尽的报告](https://medium.com/prysmatic-labs/eth2-medalla-testnet-incident-f7fbc3cc934a)。总而言之，自8月14日周五开始，Medalla测试网经历了非常大的动荡，也承受了巨大的压力，这种状态持续了五天，而期间我们也一直在进行补救。\n\n \n\n### 事件回顾\n\n<center><img src=\"https://i.ibb.co/nj5zs7M/8-22-e1b523b00b.png\"/></center>\n\n<center><i>事故发生六小时期间，我的Teku节点所目睹的Medalla参与率</i></center>\n\n<center><i>UTC时间2020-08-14</i></center>\n\n我们可以看到，一开始在三十分钟左右的时间段里，验证者的数量大幅下跌。Prysm节点都突然消失了，因为他们的时间被设置为未来的四小时。*\\*图中的红色水平线代表66.7%的参与率，而这是网络能够进行最终确定的最低要求，而当时参与率已经跌至最低点。\n\n当节点将他们的密钥转移至其他客户端，情况开始逐渐好转。事故发生的两小时之后，随着Cloudfare解决了时钟问题，并且还没有更新的Prysm验证者也回到网络，情况似乎更乐观了。根据[Prysmatic Labs的记述](https://medium.com/prysmatic-labs/eth2-medalla-testnet-incident-f7fbc3cc934a)，**本来是旨在修护问题的客户端更新版本中出现了一个严重漏洞，**导致已经更新客户端的验证者无法恢复上线，这使得问题复杂化了。\n\n事故的四小时之后，开始出现混乱的局面，参与率又再次下跌。因为所有客户端都需要处理Prysm验证者之前作出的“来自未来的证明”现在这些证明已经具备有效性。由于节点尝试处理这些证明和区块，网络开始分裂。Teku和Lighthouse客户端所占内存逐渐膨胀，这引发了性能和崩溃问题，而已经更新的Prysm客户端又无法上线，总的来说就是一片混乱。\n\n但这是超出我想象得最棒的测试经历之一！如果召开一次有关客户端测试的会议，大家聚在一起讨论怎么以极端方式来破坏网络，我觉得我们可能都想不出这么刺激的方法。“时间穿越”事件也启发了我们的思考，尤其是在大量验证者被罚没之后。\n\n随之而来的结果就是，我们尝试了许多之前从未探索过的代码路径，也做出了许多全面的改进。一切和之前相比都更上一层楼。从这次事件中我们真的收获了很多有价值的经验。\n\n \n\n### 现状如何？\n\n上周早些时候，客户端团队都忙于强化客户端，以应对突发的极端环境。我们非常艰难地缓缓爬升到了网络所需的66.7%的参与率，而网络终于又恢复到了正常状态。这一时间点是UTC时间8月19日的18:30，距离事故发生整整过去了五天。***\\*在那五天中，始终有客户端能够坚挺住，网络从未真正停止运行。\\****这证明了信标链非常健壮，信标链能够恢复。\n\n关于此次事件推荐大家阅读：\n\n- 我的[上一篇回顾总结](https://hackmd.io/@benjaminion/wnie2_200817)\n- Prysmatic Labs的[同步事件报告](https://hackmd.io/@benjaminion/wnie2_200817)和[回顾总结](https://medium.com/prysmatic-labs/eth2-medalla-testnet-incident-f7fbc3cc934a)\n- 以太坊基金会的看法：Carl最新撰写的Eth2 Staking系列[《论客户端多样性的重要性》](https://blog.ethereum.org/2020/08/21/validated-why-client-diversity-matters/)\n- Evan的[系列推特](https://twitter.com/evan_van_ness/status/1296542806652133382)，以及随附的[视频](https://www.youtube.com/watch?v=dEYzsolkxd0)\n- 以及客户端团队的更新（参见[下文](https://hackmd.io/@benjaminion/wnie2_200822#Client-team-stuff)）\n\n <br/>\n\n# 阶段0：信标链\n\n规范方面没有发生更新。\n\n我的ConsenSys研发同事发布了关于[阶段0规范形式化验证](https://consensys.net/blog/blockchain-development/formally-verifying-the-ethereum-2-0-phase-0-specifications/)的进度报告。\n\n以及此处是Sigma Prime多客户端模糊测试工作的进展。\n\n  <br/>\n\n# 释义性文章\n\n这里是一些有趣的消息：***\\*大家在学习Eth2的同时能够获得[POAP](https://www.poap.xyz/)奖励！\\****此处是相关信息，大家可以进入[Ethstaker Discord](https://discord.gg/B2wkhH4)查看 #eth2-studymaster频道。[此处](https://discord.com/channels/694822223575384095/694836320786317392/746831562422747254)是通告。大致意思就是在十周的时间里，阅读十篇Eth2文章，并且回答相关问题。成绩不错的话就能获得POAP奖励。我真的希望Eth2的开发者没有被排除在外。\n\n客户端教程：Somer Esat继续更新了他的系列教程，深度阐释了[如何使用Ubuntu系统在Medalla测试网中设置Teku客户端](https://medium.com/@SomerEsat/guide-to-staking-on-ethereum-2-0-ubuntu-medalla-teku-170e2c52bd23?source=friends_link&sk=5f88cc288bb247f1711b729ef91de003)。Somer和Super Phiz也为此制作了一个[视频教程](https://www.youtube.com/watch?v=isPUoKfaelE)。除此之外，Super Phi还和Cayman一起录制了一个如何[设置Lodestar客户端的视频](https://www.youtube.com/watch?v=k5_fywXxdD8)。Coinmonks也撰写了一篇在Ubuntu系统中设置[Lighthouse客户端的教程](https://medium.com/coinmonks/how-to-setup-ethereum-2-0-validator-node-lighthouse-meddala-goerli-4f0b85d5c8f)。\n\n至于Teku，我也制作了一个[Teku故障排除指引](https://docs.google.com/document/d/1YWi4HqkGqs9PQA67agHON4PciPKO39mlZwH_3AKg68I/edit?usp=sharing)。欢迎大家的反馈。\n\n对于喜欢快速阅读的读者，推荐阅读Simon de la Rouviere关于[Eth2概览的推文](https://twitter.com/simondlr/status/1295048216942084099)。Narkasa交易所也发布了一篇不错的介绍：[《什么是以太坊2.0？》](https://medium.com/@narkasacom/what-is-ethereum-2-0-f27a7d4be640)\n\n  <br/>\n\n# 研究工作\n\n关于Eth2信标链如何就Eth1状态达成共识的机制效率，我做了[一次分析](https://github.com/ethereum/eth2.0-specs/issues/2018)，这可能不属于“研究”范畴。太长不读：其中还有进步空间，对此我给出了一个建议。\n\nConsenSys的TX/RX团队已经做了一个在Eth2分片环境中 (也即阶段1.5) 运行Eth1客户端的模拟器，现在你也可以[参与运行](https://github.com/txrx-research/eth1-shard-demo)。Eth2环境是基于Teku客户端，Eth1则基于Catalyst (Guillaume Ballet的Geth分叉)。Danny在上周的[EDCON会议](https://www.youtube.com/watch?v=6iW1MeT-Cug)中进行了实时demo示范。\n\nVitalik[捍卫](https://ethresear.ch/t/explaining-the-liveness-guarantee/4228/7?u=benjaminion)了信标链在需要做出选择时对活性而非一致性的偏好。这是一场非常有趣的讨论。\n\n  <br/>\n\n# 媒体\n\n虽然似乎已经过去了很久，但EDCON的会议视频值得回顾，有许多关于Eth2的干货：\n\n- [Vitalik](https://www.youtube.com/watch?v=nnY22N_MnOc)：Eth1到Eth2的机会和挑战\n- [Danny Ryan](https://www.youtube.com/watch?v=6iW1MeT-Cug)：Eth1/Eth2合并模拟器 (喵星人捣乱)\n- [Hsiao-Wei](https://www.youtube.com/watch?v=-j5suWmE-DY)：阶段1分片数据链\n- [Aditya](https://www.youtube.com/watch?v=9avhMNJWnmw)：弱主观性 (weak subjectivity)\n- [Afri](https://www.youtube.com/watch?v=7yQLN49bb30)：通往Eth2的最终之路\n\n[Terence ](https://www.youtube.com/watch?v=VZyapwu90lA)(Prysm) 和[Paul](https://www.youtube.com/watch?v=wp2--tbGJZM) (Lighthouse) 与客户端相关的演示\n\nParadigm对Danny进行了[采访](https://medium.com/paradigm-fund/interview-with-danny-ryan-eth2-researcher-at-the-ethereum-foundation-9059abc330b9)，来看看他不和猫咪摔跤的时候喜欢做什么 (和蔬菜有关)。\n\nVitalik接受[Cointelegraph](https://cointelegraph.com/news/vitalik-buterin-ethereum-20-presents-a-much-harder-challenge-than-we-thought)的采访：以太坊2.0面临的挑战比我们想象中更大。各位放心，问题不大，我们喜欢接受挑战！\n\n  <br/>\n\n# 常规会议\n\n \n\n### 实现者会议\n\n第46次会议于8月20日进行。\n\n- [会议议程](https://github.com/ethereum/eth2.0-pm/issues/173)\n- [会议视频](https://youtu.be/g3fKTfBXArU?t=275)\n- 我的笔记和[Mamy的笔记](https://gist.github.com/mratsim/370f96bd0e50f3bc8bce4a7e4010f887)\n\n此次会议中我们仅对Medalla事件进行了简短的回顾，因为我们在过程中一直保持沟通，并且时间也有点紧张。\n\n目前大家都在准备信标链的发布。Afri正在处理和发布准备工作相关的[提案](https://github.com/ethereum/eth2.0-pm/issues/173#issuecomment-677486610)。Hsiao-Wei也在对我们的工作进行跟踪，幕后详情参阅[project board](https://github.com/ethereum/eth2.0-pm/projects/1)。\n\n  <br/>\n\n# 客户端相关\n\n许多客户端都进行了更新，针对Medalla测试网的历险进行回顾：此处是[Nimbus](https://our.status.im/medalla-update/)的更新以及[后续文章](https://our.status.im/medalla-update-august-21/)；此处是[Lighthouse](https://lighthouse.sigmaprime.io/update-28.html)的更新；此处是[Lodestar](https://medium.com/chainsafe-systems/lodestar-medalla-update-59865a5cce1a)的更新。Prysm的回顾以及Medalla测试网事件分析。\n\n  <br/>\n\n# 写在最后\n\n还有什么事能够媲美一边品酒一边探讨Eth2呢？Quantstamp和Cred联合组织了一次远程品酒和圆桌会议：“Wine Not Talk About Ethereum 2.0?”\n\n详情和注册方式参见[此处](https://www.eventbrite.com/e/wine-not-talk-about-ethereum-20-tickets-116121397225)，他们会把酒寄给你。\n\n我也会与许多我非常欣赏的Eth2小伙伴一同出席这次圆桌。但时间是我这边的凌晨两点，所以我可能在会议开始前就已经醉了。应该会很有意思的！\n\n <br/>\n\n  <br/>\n\n声明：ECN的翻译工作旨在为中国以太坊社区传递优质资讯和学习资源，文章版权归原作者所有，转载须注明原文出处以及ethereum.cn，若需长期转载，请联系[ethereumcn@gmail.com](mailto:ethereumcn@gmail.com)进行授权。","cover":{"childImageSharp":{"resize":{"src":"/static/61fa6edca7cb80c0a5c00fee68c6bbde/497c6/47a818a3848aff1f20c6de1c4f2cd625.png"}}}},"site":{"siteMetadata":{"title":"Ethereum Community Network","description":"以太坊——全球的、开源的去中心化应用平台。DeFi？NFT？游戏？虚拟世界？每一个人都可以成为以太坊的开发者和用户！","author":"@ECN以太坊社区网络","keywords":"以太坊,以太坊中国,Ethereum","siteLanguage":"zh-CN","siteLocale":"zh-cn","siteUrl":"http://ethereum.cn","twitterUsername":"@EthereumCN"}}},"pageContext":{"id":"Articles_49"}},"staticQueryHashes":["1238767529","2940180826"]}