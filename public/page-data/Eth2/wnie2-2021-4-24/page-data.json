{"componentChunkName":"component---src-template-article-js","path":"/Eth2/wnie2-2021-4-24","result":{"data":{"strapiArticles":{"title":"Eth2 进展更新 （截至2021/4/24)","summary":"信标链第一次事故分析，计划7月中旬进行主网伦敦升级","publishDate":"2021-04-25","author":"Ben Edgington","authorImg":{"childImageSharp":{"fixed":{"src":"/static/64988ed2b203b1fa0319cf09a1f7b233/eed38/21639b4d3c2f361c738a2f40035bcddc.png"}}},"content":"来源 | [What's New in Eth2](https://hackmd.io/@benjaminion/wnie2_210424)\n\n<br/>\n\n# 首推\n\n这周最不容错过的是观看 EthGlobal 的“[合并峰会](https://www.youtube.com/watch?v=Yk39hNavhyM)”！详情看[下文](https://hackmd.io/@benjaminion/wnie2_210424#EthGlobal-Merge-Summit)。\n\n<br/>\n\n# 信标链\n\n## 🚨 快讯 🚨\n\n信标链出现了[第一次事故](https://twitter.com/prylabs/status/1385840170017112064)。在北京时间 4 月 24 日 09:36 到 11:28 期间，大量区块丢失了。正常来说，信标链上只有大概 1% 的区块会出现丢失。在这个期间，接近70% 的 slot 是空的 (560 个 slot 里丢失了 403 个)\n\n[![A list of missing blocks.](https://benjaminion.xyz/images/210424_missed.png)](https://i.ibb.co/wJ4SY87/beaconcha-in.png)\n*在这次事故中，有大量丢失区块。(图片来自 [beaconcha.in](https://beaconcha.in/)。点击看大图)*\n\n\n区块链就是用来生成区块的，所以真的是个严重问题。但是，信标链一直在不断敲定区块，而且似乎证明的生成并没有受影响。但是，只生成这么少的区块，剩下的区块提议者在他们的区块里没有足够的空间把所有的等待证明打包进去，所以参与率有时会下降到危险的程度。信标链的参与率一直都保持在 99%左右，因此看到这种程度的下降的确是相当令人震惊的。\n\n[![Graph of participation rates showing a large drop during the incident.](https://benjaminion.xyz/images/210424_participation.png)](https://i.ibb.co/Y70ZjyD/metal-albert.png)\n*在事故期间，区块空间不够，参与率造成参与率下降。\n( 数据来自[Metal Albert](https://hackmd.io/@benjaminion/wnie2_200501#And-finally…)。点击看大图)*\n\n有人很快过来责备我[乌鸦嘴](https://twitter.com/benjaminion_xyz/status/1383765895965593607)，但发现[这个漏洞是出现在最多人使用的 Prysm 客户端上](https://github.com/prysmaticlabs/prysm/issues/8298)。问题的根源与给 Eth1 存款合约的状态投票有关：如果你无法看到存款合约的正确数据，你无法提议区块。当网络给一个新的存款根投了票 （这种情况一般每 7 小时发生一次），这次事故就马上自行解决了。Prysm 团队发布了一个[快速修复](https://github.com/prysmaticlabs/prysm/pull/8809)的 PR，但在它发布和大多数用户都升级前，这种事还可能发生，尽管几率很小。\n\n这次事件对质押者有四个方面的影响。但总的来说，影响都是相对小的。它其实可以发展到非常严重的地步。\n\n1. 对于被抽到做提议区块且使用 Prysm 客户端的验证者，他们在这个期间丢失了区块奖励。\n2. 对于所有的验证者，区块空间的减少使得所作证明被打包到链上的机会会严重减少，导致遭受不参与的惩罚。\n3. 对所有的验证者，所作的证明尽管被打包到链上但是严重延迟的，他们所获得的奖励会减少。\n4. 对于所有验证者的最后一个影响，由于整体的奖励水平是随参与率升高而上升的，因此在这个期间所有验证者的奖励都减少了。\n\n这是 Prysm 团队的[最新更新](https://twitter.com/prylabs/status/1386011312849833984) (看上图，我的节点所显示的参与率下跌情况比他们报告的还要严重)。\n\n### 教训\n\n教训：大家都是时候把客户端多样化重视起来。\n\n我们一直都在强调这一点。在 Prysm 的一个漏洞差点使整个 Medalla 测试网崩溃这件事之前就强调了；在 Prysm 的一个漏洞导致 Spadina 测试网创世遭遇无法敲定这件事之前就强调了。这些都不是 Prysm 的问题：这是让一个客户端控制超过 70% 的网络造成的一次集体故障。运行另外三个产品级客户端是完全没有坏处的。相反只会有好处，无论是对网络健康，还是你的[个人收入](https://twitter.com/benjaminion_xyz/status/1377904793910448132)而言。\n\n如果你在运行主流客户端 （现在是 Prysm)，那么现在你需要行动起来了！客户端多样性不是别人的事，而是*你的*事。如果你在使用质押服务，你可以对它们进行游说。如果你在运行质押服务，可以随时联系[我们](mailto:ben.edgington@consensys.net)。\n\n## Rayonism 项目\n\n其他方面的消息，[Rayonism](https://rayonism.io/) 黑客松项目正在进行中，并取得重要进展。Protolambda 在 “合并峰会”给出了一个很好的概述。再提醒一下，Rayonism 项目旨在一起构建一个多客户端开发者测试网，展示 PoS 合并、分片、存款提款、甚至把 optimistic rollup 也加进去。\n\n总的来说，Eth1 (执行层) 和 Eth2 (共识层) 的客户端都有很强的开发者参与。目前的进展很不错，下周可能会推出一个短期的多客户端开发者测试网，下周末会推出一个更长期的开发者测试网。\n\n详细可以看 [GitHub 代码库](https://github.com/ethereum/rayonism) ，也可以根据[合并测试网教程](https://github.com/protolambda/mergenet-tutorial)尝试自己运行一个合并测试网。目前，在 Eth1 (执行层) 一边你可以运行 Catalyst/Geth 或 [Nethermind](https://twitter.com/nethermindeth/status/1385169437666447361)，在 Eth2 （共识层）一边你可以运行 Teku 或 Lighthouse。\n\n## \"合并\"\n\n\n“合并” 是我们将以太坊工作量证明 (PoW) 链完全迁移到权益证明 (PoS) 链的节点——把 PoW 链“合并”到信标链里。\n\n现在围绕”合并“的讨论重点是时间。4 月 22 日上周五，我们开了一次非常规[核心开发者会议](https://youtu.be/C9hzAYkklQM?t=246)，就此进行讨论。讨论没有一个确切的结果，因为需要在把一些很好的 EIP 加入主网与实现”合并“间取得平衡，而且两边都有很多工作需要进行。Rayonsim 项目的成果也是部分的影响因素。\n\nTim Beiko [对这次会议进行了总结](https://twitter.com/TimBeiko/status/1385616588498374656)。计划大概是这样：在 7 月中旬 (目标是 14 日）实现伦敦升级，此后是一个小型的 Eth1 功能分叉 (上海升级) 与”合并“工作同时进行。如果”合并“ 有希望可以实现，那么会优先实现”合并“。否则，先进行上海升级。\n\n有人提到”合并”最早发生在十月，但这似乎不太可能。不过，今年年底还有有机会可以实现的。\n\n## Staking\n\n[标准免责声明适用于以下所有内容。我没有用我的 ETH 尝试过以下任何项目；请读者务必做好研究与调查。]\n\n[Abyss Finance](https://abyss.finance/) 带来了一些有趣的东西。首先是“[批量存款工具](https://abyss.finance/eth2depositor)”。按照 Launchpad 的标准步骤生成质押文档之后，使用该工具就可以通过一笔交易完成所有存款，而不需要在 MetaMask 上点击多次以获得授权，这无疑是巨大的进步。与单独存款相比，使用批量存款的方法确实可以省去一大笔 gas 费。\n\n其次就是一种资助验证者托管的[新方法](https://abyss.finance/hosting)。Abyss 表示，如果用户将 DeFi 流动性代币在其方案中锁定几周，Abyss 将永久地为用户免费提供验证者托管服务。他们使用 [Allnodes](https://www.allnodes.com/) 的托管服务，这我是可以担保的，因为 a) Allnodes 运行 Teku 客户端；b) 在我追踪的 staking 服务中，他们的性能始终[名列前茅](https://consensys.net/blog/codefi/institutions-are-earning-8-5-apy-for-staking-on-ethereum-2-0/)。\n\n说到 Allnodes，他们还[集成了硬件钱包 Ledger Nano X](https://wallet.allnodes.com/eth2/generate), 利用其新 BLS12-381 功能，用户可以直接从自己的硬件钱包中存款，并安全地管理提款密钥。\n\n现在我们可以指定一个 Eth1 合约作为质押存款的提款地址，去信任的质押池正逐渐成为现实。这允许用户质押 <32 ETH 的数额。我得知了一些质押池的新消息：\n\n- [Stakewise](https://stakewise.io/) 已经[上线主网并开始运作](https://stakewise.medium.com/stakewise-announces-trustless-staking-and-end-of-the-bootstrapping-campaign-540b27e3d534)了。\n\n- [Rocketpool](https://hackmd.io/@benjaminion/wnie2_210424) 也即将上线了。他们刚发了 Rockpool 介绍系列的[第三篇](https://medium.com/rocket-pool/rocket-pool-staking-protocol-part-3-3029afb57d4c)：RPL & 代币经济。\n\n- Paradigm Research 刚发布了一篇关于[质押池和质押衍生品](https://research.paradigm.xyz/staking)的报告。其结论对去中心化质押池来说非常有利。文章以 [Lido](https://lido.fi/) 及其质押代币 stETH 作为案例研究。\n\n## 经济学\n\n大家似乎最近才意识到，在合并之后，除了验证和生成信标链区块的奖励之外，Eth2 验证者还将赚得交易费用。在撰写本文时，我快速浏览了一下 [Etherscan](https://etherscan.io/blocks)，目前每个区块的交易费用平均约为1个 ETH，这比当前的信标区块奖励高出 250 倍。当然，EIP-1559 将减少区块奖励，但还有[矿工的可提取价值](https://youtu.be/Yk39hNavhyM?t=15936)，这有可能会显著地提高奖励。\n\n无论如何，合并使得 Staking 经济学发生了实质上的改变。合并之后，验证者的年收益可能至少会有 [25%](https://twitter.com/drakefjustin/status/1384124998084792324) (计算：https://docs.google.com/spreadsheets/d/1FslqTnECKvi7_l4x6lbyRhNtzW9f6CVEzwDf04zprfA/edit#gid=0) 甚至会[更高](https://www.reddit.com/r/ethstaker/comments/muepnz/eth_20_validator_152_apr_after_the_merge/)。而现在只有 [7.85%](https://twitter.com/Eth2Bot/status/1385745511894896641)。\n\n<br/>\n\n# EthGlobal 合并峰会\n\nEthGlobal 主办的 [Scaling Ethereum](https://scaling.ethglobal.co/) 黑客松正在进行中，而在 4 月 23 日有一场 “合并峰会”。\n\n[完整视频](https://www.youtube.com/watch?v=Yk39hNavhyM)已经上传。下面给出了每段演讲的链接：\n\n\n- [16:45](https://youtu.be/Yk39hNavhyM?t=907) 未来就是现在 - 从大都市 (Metropolis) 到宁静 (Serenity), *Hsiao-Wei Wang* [[幻灯片展示](https://docs.google.com/presentation/d/1tKKfWC4ZHQbrI5isZta8Iusz2n_1plvbR0w4LvNpQQU/edit#slide=id.p)]\n\n- [17:15](https://youtu.be/Yk39hNavhyM?t=2446) 合并的状态, *Lakshman Sankar*\n\n- [17:45](https://youtu.be/Yk39hNavhyM?t=4065) Rayonism, *Diederik Loerakker (Protolambda)*\n\n- [18:15](https://youtu.be/Yk39hNavhyM?t=5954) 讨论：以太坊共识的发展，*Danny Ryan、 Trent Van Epps、 Aftab Hossain*\n\n- 18:45 中场休息\n\n- [19:00](https://youtu.be/Yk39hNavhyM?t=9013) 保证: 没有缺点的客户端多样化，*Jim McDonald*\n\n- [19:30](https://youtu.be/Yk39hNavhyM?t=10623) 信标链创世后，对以太坊质押的一些外行看法，*Superphiz*\n\n- [20:00](https://youtu.be/Yk39hNavhyM?t=12645) 私密共享的验证者 - Eth2 验证者韧性的下一章节, *Mara Schmiedt*\n\n- [20:30](https://youtu.be/Yk39hNavhyM?t=14038) Prysm 如何计划与其他 Eth1 客户端实现互操作性, *Terence Tsao*\n\n- [21:00](https://youtu.be/Yk39hNavhyM?t=15936) 合并后的 MEV (并且有 Nethermind 和 Flashbots), *Tomasz Stanczak, Alex Obadia*\n\n- [21:30](https://youtu.be/Yk39hNavhyM?t=18078) 合并之后会发生什么? *Vitalik Buterin* [预告: Ethereum 3.0 🙂](https://assets.hackmd.io/build/emojify.js/dist/images/basic/slightly_smiling_face.png)]\n\n这是一组高质量的演讲，值得大家花时间好好看看。\n\nu/Liberosist 发布了[一些笔记](https://www.reddit.com/r/ethfinance/comments/mxdu7b/notes_on_ethglobals_merge_summit/)。但是我在 [EthGlobal.tv](http://ethglobal.tv/) 直播上看到不同的观看人数，是文章中提到的 3-4 倍。 \n\n<br/>\n\n# 释义性文章\n\nBarnabé Monnot 发布了文章《[以太坊未来之路](https://barnabe.substack.com/p/eth2)》：“可视化了合并、数据分片、以 rollup 为中心的以太坊。”这是一篇很可爱的释义性文章 (手写图表！)，解释了以太坊未来中长期的发展重点。建议大家与上文所提到的演讲视频连起来一起阅读。\n\nNimbus 的 Jacek 在推特发了另一条 thread，又是一篇经典的解释内容。这次他讲的内容是[区块中的证明](https://twitter.com/jcksie/status/1384154639596101632)。\n\n<br/>\n\n# 媒体资源\n\nViktor Bunin 在他的[第一个专栏文章](https://twitter.com/ViktorBunin/status/1385935698801401857)里支持了以太坊的原则和治理：[Eth2 是我们未来金融的中立基础设施](https://cointelegraph.com/news/eth2-is-neutral-infrastructure-for-our-financial-future)。我完全同意。我今天才意识到，五年多来，我可能每天都在思考以太坊。Viktor 阐述了其中的一些原因。\n\nCoindesk 的 Eth2 播客进展顺利。我觉得我们在处理一些犀利的话题时变得更加得心应手了。\n\n- [4 月 15 日](https://www.coindesk.com/podcasts/mapping-out-eth-2-0/proof-of-stake-or-proof-of-work)，我们谈论了 PoW vs PoS\n\n- [4 月 22 日](https://www.coindesk.com/podcasts/mapping-out-eth-2-0/coinbase-infura-commonalities)，我们谈论了中心化和去中心化。有的读者可能不同意我所说的一些观点😛)\n\n\n\n我觉得这个播客相对来说比较温和，且信息量也挺大的。值得推荐！\n\nChristine 还在最新的 [Valid Points](https://www.coindesk.com/rayonism-new-plan-merge-ethereum-and-eth-2-0) 系列中写了关于质押总价值和 Rayonism 的文章。\n\n<br/>\n\n# 研究\n\nDankrad [宣布](https://twitter.com/dankrad/status/1382082493243916298) [Legendre 函数赏金活动](https://legendreprf.org/bounties) 的奖励提高至两万美元，激励大家来对 Legendre PRF 提出质疑或者证明。当我们实现分片时，这将是一个重要的基元：它以一种多方计算友好的方式，用于[证明分片数据的托管](https://ethresear.ch/t/a-0-001-bit-proof-of-custody/7409?u=benjaminion)。\n\n在 [ethresear.ch](https://ethresear.ch/):\n\n- Vitalik 的一篇文章，提出了[错开分片区块生成](https://ethresear.ch/t/near-instant-transaction-confirmation-via-staggered-shard-block-production/5643?u=benjaminion)的想法，以减少用户的交易延迟。他的最新想法提出了一种[激励分片区块生产者诚实作为的方法](https://ethresear.ch/t/simple-approach-to-incentivizing-shard-staggering/9149?u=benjaminion)。\n\n  \n\n<br/>\n\n# 常规会议\n\n## Eth2 实现者会议\n\n第 62 次会议在 4 月 22 日举行。\n\n- [会议议程](https://github.com/ethereum/eth2.0-pm/issues/214)\n\n- [会议视频](https://youtu.be/D9Aqr8thF9c?t=232)\n\n- 我的[速记](https://hackmd.io/@benjaminion/rJUzAo0Id)，还有 Alex Stokes 的[推特笔记](https://twitter.com/ralexstokes/status/1385295236885204997)\n\n\n\n除了平常的更新之外，这次会议的主要重点是，Altair 升级日期可能会稍微推迟一点。客户端团队还需要几周的时间来准备测试网，并且希望将测试网运行大概六周的时间。完成这些之后就到六月底了。但是我们不希望与计划于 七月中进行的伦敦分叉冲撞了。所以， Altair 升级的时间仍未确定。\n\n## 合并实现者会议\n\n第 2 次会议在 4 月 15 日举行。\n\n- [Notes](https://notes.ethereum.org/@protolambda/merge_impl_call_2) by Protolambda Protolambda 的[笔记](https://notes.ethereum.org/@protolambda/merge_impl_call_2)\n- [Video](https://youtu.be/ODcNpWiLASk?t=121). This gets pretty deep into the technical weeds. [视频](https://youtu.be/ODcNpWiLASk?t=121)。这涉及到相当深的技术问题。\n\n\n本次会议进行时，一些开发者正处理 Eth1 柏林分叉后 OpenEthereum 出现的一些漏洞，因此会议中缺少了一些利益相关者。\n\n# 其他新闻\n\n- 以太坊基金会[正在招聘](https://twitter.com/drakefjustin/status/1382795227388317700)”独角兽“安全研究员\n\n- Lighthouse [更新 35](https://lighthouse.sigmaprime.io/update-35.html) 已经发布\n\n<br/>\n<br/>\nECN的翻译工作旨在为中国以太坊社区传递优质资讯和学习资源，文章版权归原作者所有，转载须注明原文出处以及ethereum.cn，若需长期转载，请联系eth@ecn.co进行授权。\n","cover":{"childImageSharp":{"resize":{"src":"/static/61fa6edca7cb80c0a5c00fee68c6bbde/2244e/0e270bcef562ca7bc32c54464520bb62.jpg"}}}},"site":{"siteMetadata":{"title":"Ethereum Community Network","description":"以太坊——全球的、开源的去中心化应用平台。DeFi？NFT？游戏？虚拟世界？每一个人都可以成为以太坊的开发者和用户！","author":"@ECN以太坊社区网络","keywords":"以太坊,以太坊中国,Ethereum","siteLanguage":"zh-CN","siteLocale":"zh-cn","siteUrl":"http://ethereum.cn","twitterUsername":"@EthereumCN"}}},"pageContext":{"id":"Articles_251"}},"staticQueryHashes":["1238767529","2940180826"]}