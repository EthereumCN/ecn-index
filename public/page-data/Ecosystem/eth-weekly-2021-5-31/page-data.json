{"componentChunkName":"component---src-template-article-js","path":"/Ecosystem/eth-weekly-2021-5-31/","result":{"data":{"strapiArticles":{"title":"以太七日谈 • 2021/5/31","summary":"伦敦升级新测试网 Calaveras，Arbitrum One beta 版本上线主网","publishDate":"2021-05-31","author":"ECN","authorImg":{"childImageSharp":{"fixed":{"src":"/static/18e33ca02b0130c3f952c7a725931e7a/497c6/ac7e303d9bcf9058c207ba55f49192bb.png"}}},"content":"![27](https://i.ibb.co/FVFKprw/27.png)\n<br/>\n\n# EIP-1559\n**AllCoreDev 进展**\n\n5月29日举行的第144次AllCoreDev 首先处理了 EIP-1559 新引进的字段 ` MaxFee` (即最高费用)  和`maxPriorityFee`  (即小费) 没有形成一个明确的上限，这意味着攻击者可以任意创造大量交易。在1559以前，这种情况是不可能存在的，因为如果你想用很高的gas 价格创建一个交易，你需要真的支付这个价值的ETH。因为在1559的字段是最大值，你可以滥用它——不支付这些高额的gas 费，且能攻击网络。此外，一些客户端已经有对这些字段的检测了，大于2^256 的会被阻拦，但因为这没有明确在规范里写明，不是全部客户端都这样做。这意味着有些坏区块不但会对交易池进行DoS 攻击，还会分叉链。所幸的是，解决这个问题相当简单。\n在会议里，经过多番讨论，决定对这个情况作4种检测：\n1. `MaxFee`<2256\n2. `maxPriorityFee`<2^256\n3. `maxFee`大于等于`maxPriorityFee`\n4。交易发送者的余额大于`maxFee`与所消耗gas的乘积。这确保帐户确实有足够的资金支付最坏情况的`maxFee`\n\n第四个检测最具争议，但经过讨论后决定把它加上，未来有人想到移除它的更有力的理由，大家可以轻易把它移除。\n尽管这些变更是简单的，我们还是需要在客户端实现后对其做测试。\n会议决定需要一个新的开发者测试网 Calaveras 来对这些新变更作测试，并预期在未来两周上线，将对其进行充分测试至敲定交易池的实现。\nCalaveras规范：https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/client-integration-testnets/calaveras.md\n如果进行得顺利，下一期的AllCoreDev 将讨论新测试网的分叉区块。如果测试网分叉顺利的话，下一步是设主网的分叉区块。\n来源：https://twitter.com/TimBeiko/status/1398329483434741762?s=20\n\n<br/>\n\n**1559钱包界面会议**\n\n此次会议的议程为： 1）对 JSON RPC 文档修改的讨论；2）PriorityFee 的建议最低值； 3）钱包服务商需要与各自的用户沟通这些修改； 4）需要 ERC 编辑程序，以及核心开发者对钱包服务商问题的解答。\n以下为对此次会议一些问题和答案的整理，希望从钱包界面设计角度能加深大家对EIP-1559的认识：\n\nQ：如何预估`Priority Fee`，怎么算高，怎么算低？\n\nA：A: 我们现在有些大致的数值。`Priority Fee`是你想支付给矿工足够多的费用，以把你的交易打包到链上。越多的交易打包到区块里，你的交易进入叔块的风险越高。这个数值在以前很容易计算，但现在主要的风险来自 MEV 的交易捆。因此，如果矿工的区块里有 MEV，该区块里的交易进入区块的风险就高很多。在“Cheatsheet: 1559 for Wallets & Users”里，你可以看到一个图表展示了“区块的 MEV 平均风险与 小费数额之间的线形关系”。Flashbot 有一个追踪 MEV 的仪表盘，现在还没有钱包可用的插件。但如果你想要一个大概的数值的话，可以在 EIP 上主网前的1 到2周看一下仪表盘，你会了解到那时区块的平均 MEV，然后再回到那张图表，看看对应的小费是多少。经过了一轮优化后，现在每单位gas的小费大概是2 gwei。上主网后，还要看 MEV 如何发展。\n\n![mev](https://i.ibb.co/XSKzdLC/mev-and-tips.png)\n \n如果你想做得精细点，上面所说的是一般情况，你的快速模式可能是区块里有95%都是MEV 也仍然能打包交易到区块，一般模式可能是区块有30%~40% 的 MEV，而缓慢模式是等待MEV 的区块出现，然后以1 到2 gwei 把交易打包到区块，平均来说是2到3 个区块后。\n\nQ：关于计算 basefee 的预测时间，因为有太多不断在变动的变量，钱包开发者很担心在高度拥堵，出现不同钱包间的竞价战时，用户无法获得及时有效的信息进行交易。\n\nA：要解决这个问题，我们需要链上数据，上线后几周的数据将非常有用，只有获得这些数据时才能得知如何设默认值。当 1559 上线主网后，基本费会设为 1 gwei，这是非常低的数值，这意味着将会有一段时间区块都是满的，因为会有竞价战。因此我估计钱包解决这个问题的最简单方法是等待 1559 的UI (用户交互 ) 设计起作用，也就是等到区块不是完全满的时候。我的预估数据时15~30 分钟。在经历了这些峰值 后，你会发现竞价战消失了，价格平稳了，1559 的 UI 起作用了。一开始的时候，用户可能要在超额支付和交易不卡在等待状态间做 权衡。\n\nQ：链下 API 如何解决\n\nA：目前 Etherscan 还没有明确的方案，Barnabé 提出可以有适用于1559的预言机。虽然还没与数据，但一个很强的直觉是竞价战不会频繁发生，如果发生了也会是短时间的，因为基本费用会上涨得很快形成压力，过了某个点后它能让系统稳定下来，因此小费的预言机应该与我们现有的预言机很不一样，现有的预言机需要对非常长的历史数据作分析，起码200个区块数据。但我认为小费的预言机是不需要的，最近5到10个区块的数据就足够了，然后就可以看到人们竞价的中间值。\n\nQ：json rpc 有哪些变更:\n\nA：1. 添加` baseFeePerGas` 到区块头 to the block header\n2. 添加` maxFeePerGas`和 `maxPriorityFeePerGas`到交易，如果交易类型是2的话，这表明这是1559式交易\n3. 每个客户端都是执行的api\n视频：https://www.youtube.com/watch?v=FEgFd7un9q4\n\n<br/>\n\n**1559 社区再起讨论**\n\n钱包服务商MyCrypto 的创始人Taylor Monahan 于5 月27日发了很长的推特对EIP-1559 表达了不满，再次掀起社区对此EIP的热烈讨论。她提出的观点颇具争议，但以下观点得到了很多人的认同：\n“社区对这份EIP 的关注更多变成“ETH价格上升”和“交易费下降”，而已开始承诺的减少超额支付的gas 费、更高的市场效率、更稳定的gas费、甚至减少交易费等似乎没人再提。”\n此外，对eip-1559 设计的合理性与实现的可能性上的质疑，也得到大量的回应，此处推荐\n\n基金会的研究员Barnabé的回复：https://twitter.com/barnabemonnot/status/1397731718723821569?s=20\nParadigm 的研究员的回复：Georgios Konstantopoulos：https://twitter.com/gakonst/status/1397855965429612547?s=20\n\n来源：https://twitter.com/tayvano_/status/1397725861575421953?s=20\n\n<br/>\n\n“EIP-1559 Gas API 会议”将于北京时间6月4日22：00举行，时长为1小时\n议程：\n\n<br/>\n\n•\tGas API 提供商的演示\n•\t用于gas 价格的JSON RPC 终端\n•\t开放讨论\n来源：https://github.com/ethereum/pm/issues/328\n\n<br/>\n\n# ETH2\n以太坊基金会 ETH2 团队的AMA将于北京时间6 月23日下午9点于Reddit 论坛的/r/ethereum 板块进行。\n来源：https://twitter.com/drakefjustin/status/1398375498342977544?s=20\n\n<br/>\n\n最新的以太坊2.0规范中SSZ 与默克尔证明教程上线\n指路：https://www.ssz.dev/\n\n<br/>\n\n# Layer2\n\n**Arbitrum One beta 版本上线主网**\nUTC 时间 5 月 28 日，Layer-2 扩容解决方案 Arbitrum Rollup 的合约部署至主网，并面向开发者开放。截至发布为止，已超过 250 个团队申请部署至 Arbitrum One 上。Abitrum 团队表示，之所以将其部署在主网的链命名为 Arbitrum One，是因为 Arbitrum 表示技术，而 Arbitrum One 是我们主要的链。也就是说，未来可能会有其他 rollup 链使用 Arbitrum 技术，为了避免混淆，便给出了 Arbitrum One 这个概念。\n在上线主网之前，Arbitrum 宣布与区块链浏览器 Etherscan 以及区块链开发平台 Alchemy 达成合作关系，将为 Arbitrum 提供浏览器 (将在七月准备就绪) 和开发平台的支持。\n\n来源：\nhttps://offchain.medium.com/introducing-arbitrum-one-our-mainet-beta-ed0e9b63b435\n\n<br/>\n\n**社区投票支持 Uniswap V3 部署至 Arbitrum 上**\n@rleshner 于 5 月 27 日，在区块链投票平台 snapshot 发起投票：提议在 Arbitrum 上部署 Uniswap v3，投票为期两天。投票链接：https://snapshot.org/#/uniswap/proposal/Qmehop1NNWP9VEf7tGLEAYRphVsXtdxkL7oKEhaXL2Xao6\n截至投票通道关闭，共 4323 万 UNI 签名投了支持票，309.34 UNI 投了反对票，比实际通过提案所要求的门槛多了 100 多万。\n对于此次社区的自发投票支持将 Uniswap v3 部署至 Arbitrum 的行为，Uniswap 的创始人 Hayden 表示：\n“如果 snapshot 上的投票通过了，Uniswap 将应社区的需求，部署 v3 至 Abitrum 上，我们已经开始了接口支持和计划部署的工作。同时，我们将继续与 Optimism 团队的合作，并在不久之后部署。”\n来源：https://twitter.com/haydenzadams/status/1397675094001045508\nzkSync 1.x 即将上线主网\n5 月 25 日，zkSync 推出了 1.x 版本的测试网，开发者可以在 Rinkeby-beta 和 Ropsten 测试网上测试以下新功能：\n•\tERC-20 代币 swap\n•\t铸造、发送以及 swap NFT\n•\t将 NFT 从二层提至一层\nzkSync 1.x 升级主网版本新增的功能包括 swap、NFT、新的事件系统，还将发行无需许可的代币，1.x 将于 5 月末上线主网，并在 2 周的升级时间锁定后生效，以便用户有时间选择退出。\n \n此次升级将需要添加 Regenesis：改变 zkSync 状态的结构。也就是说，所有的账户将保持不变，但我们将把每个账户的代币余额树的高度从 11 增加到 32。这个新的根哈希将由 zkSync 安全委员会的大多数成员 (15个成员中的8个) 进行计算和签名。\n\n![zk](https://i.ibb.co/Z2pQjQ9/zk-sync.png)\n\n来源：https://medium.com/matter-labs/zksync-1-x-swaps-nfts-event-system-and-permissionless-token-listing-e126fcc04d61\n\n<br/>\n\n# 生态\n**Gitcoin 推出治理代币 GTC，其中 15 % 进行了回溯空投**\n5 月 25 日，开源软件资助平台 Gitcoin 宣布推出治理代币 GTC 代币和 Gitcoin DAO，这两个关键组成部分将使 Gitcoin 去中心化，并为资助开源开发构建一个公平的协议。\n治理代币 GTC 的总发行量为 1 亿，分配如下：\n•\t15% 进行回溯空投\n•\t50% 用于 Gitcoin DAO\n•\t35% 分给当前的利益相关者\n根据 Gitcoin 的公告，其治理代币 GTC 没有经济价值，这是一种用来监管 Gitcoin 生态系统的治理代币。通过推出 GTC 和 Gitcoin DAO，Gitcoin 的目标是构建一个 Quadratic Lands —— 一个由数字民主统治的数字生态系统，在这里为社会带来贡献的项目将能够得到很好的资助。最重要的是，Quadratic Lands 是由它所服务的社区建立的 —— 创造了一个积极的反馈循环，让居住其中的市民不断改善他们所居住的数字社区。\n\n来源：https://gitcoin.co/blog/introducing-gtc-gitcoins-governance-token/\n\n<br/>\n\n**Flashbots 发布 v0.2 版本**\nFlashbots 是一个开源研发机构，主要专注于构建一系列工具以帮助分析 MEV 问题。5 月 25 日，Flashbots 发布了 v0.2 版本，添加了 \"bundle merging\" (捆绑合并) 功能。意味着 Flashbots 的矿工现在可以在每个区块挖多个捆绑交易。\n\n来源：https://twitter.com/bertcmiller/status/1396961882121121799\n\n<br/>\n<br/>\nECN的翻译工作旨在为中国以太坊社区传递优质资讯和学习资源，文章版权归原作者所有，转载须注明原文出处以及ethereum.cn，若需长期转载，请联系eth@ecn.co进行授权。\n\n\n","cover":{"childImageSharp":{"resize":{"src":"/static/66a1b01256795a8db63db75f4e581724/497c6/a8ac179452d4a65b2def3f67474e5186.png"}}}},"site":{"siteMetadata":{"title":"Ethereum Community Network","description":"以太坊——全球的、开源的去中心化应用平台。DeFi？NFT？游戏？虚拟世界？每一个人都可以成为以太坊的开发者和用户！","author":"@ECN以太坊社区网络","keywords":"以太坊,以太坊中国,Ethereum","siteLanguage":"zh-CN","siteLocale":"zh-cn","siteUrl":"http://ethereum.cn","twitterUsername":"@EthereumCN"}}},"pageContext":{"id":"Articles_273"}},"staticQueryHashes":["1238767529","2940180826"]}