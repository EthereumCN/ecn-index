{"componentChunkName":"component---src-template-article-js","path":"/ethereum-2-0-and-depositing-process","result":{"data":{"strapiArticles":{"title":"ETH2.0-存款过程","summary":"本文拆分讲解Eth2.0存款过程以及验证者可能遇到的其他状态。","publishDate":"2020-07-10","author":"beaconcha.in","authorImg":{"childImageSharp":{"fixed":{"src":"/static/c6bb60ad0825462da342bb4bf8e75aca/c9a0f/eb43ea13ca144a6fd48c5a2a0267faa0.jpg"}}},"content":"# ETH2.0-存款过程\n\n\n\n来源 | [beaconcha.in](https://kb.beaconcha.in/ethereum-2.0-and-depositing-process)\n\n本文将为您分阶段讲解存款过程。在阅读本文之前，我强烈建议读者先阅读[《Eth2.0密钥》](http://ethereum/)一文，以便更好地理解以太坊2.0的密钥是如何运作的。\n\n <br/>\n\n# 存款合约\n\n\n\n\n![p1.png](https://i.ibb.co/2tLqFTZ/p1-104f7b630a.png)\n\n\n\n\n\n接下来我们分别看看上图的每个状态，并说明如何大致地确定每个状态的持续时间。\n\n  <br/>\n\n# Mempool-状态：未知\n\n每一笔已签名的交易都得先访问**Mempool**，这可以称为交易的等候室。在此期间，交易状态为[pending (待处理)](https://etherscan.io/txsPending)。矿工会根据交易提供的gas费，选择优先处理让他们获益最大的交易。如果网络高度拥挤 (即许多交易待处理)，则新交易提交的**gas费**很有可能超过旧交易，从而导致旧交易的等待时间为**未知**。\n\n  <br/>\n\n# 存款合约-状态：已存款\n\n一旦交易到达存款合约，**存款合约**就会检查交易的输入数据和价值。如果**交易额**低于1 ETH的**最低限制**，或者交易输入数据**不存在/无效**，交易将**被拒绝**并退回给发送方。\n\n如下图所示，用户端创建的输入数据正体现了Eth2.0即将上线的验证者密钥和提款密钥。点击此处阅读《Eth2.0密钥》一文。\n\n**为什么要花7.5个小时呢？**\n\n为了确保交易不会因区块重组而作废 (开发者以代码呈现ETH1_FOLLOW_DISTANCE)，Eth2.0会将进入存款合约之后1024个Eth1.0区块的交易纳入考虑。处理完1024个Eth1.0区块后，还必须等待32个Eth2.0 Epochs (时段)，信标链才能识别该存款。在这32 Epochs过程中，验证者对新存款进行投票。然而，如果出现区块提议失败或者Eth1.0恶意节点 (负责将存款记录提供给Eth2.0网络)，就会导致更长的等待时间。既然如此，不如尝试自己运行节点吧！\n\n计算方式：1024个区块= 1024 x〜13秒= 13,312秒=〜4小时，32 Epochs= 32 x 6.4分钟= 204.8分钟=〜3.5小时。\n\n\n\n<center><img src=\"https://i.ibb.co/3f4Cj4s/p2-26c9b1c292.png\"/></center>\n\n\n\n同样，Eth2.0链识别出存款之后（7.5小时后），通过beaconcha.in浏览器可查看，验证者状态将更新为已存款。\n\n \n\n<center>被拒绝存款</center>\n\n\n\n\n<center><img src=\"https://i.ibb.co/6Xx55xK/p3-675e1f4a97.png\"/></center>\n\n\n\n\n\n<center>被拒绝交易</center>\n\n  <br/>\n\n# 验证者队列-状态：待处理\n\n\n\n<center><img src=\"https://i.ibb.co/QYn1NTN/p4-a47640b18c.png\"/></center>\n\n\n\n\n到了这步，信标链可以访问存款了。根据总共的存款数量，会产生一条验证者队伍。 每个Epoch仅激活四个验证者 (每天激活900个验证者)。\n\n注意：前16,384个验证者 (即创世验证者) 不需要排队，而是直接从Slot 0开始质押。\n\n  <br/>\n\n# 质押-状态：活跃\n\n\n\n<center><img src=\"https://i.ibb.co/VDWPh3m/p5-9209e803a0.png\"/></center>\n\n\n\n\n\n验证者现在质押状态已被激活，可以提议区块并对证明进行签名——他们即将获得奖励！\n\n  <br/>\n\n# 其他验证者状态\n- 存款无效 (Deposit Invalid)\n\n交易的[BLS](https://kb.beaconcha.in/ethereum-2-keys)签名无效。\n\n\n\n\n<center><img src=\"https://i.ibb.co/8BkfGD9/p6-e529d82123.png\"/></center>\n\n\n\n\n-  验证者离线 (Active Offline)\n\n即活跃验证者在2个epochs中未进行证明工作。\n\n\n\n\n<center><img src=\"https://i.ibb.co/kcbZFJm/p7-6d7a79f497.png\"/></center>\n\n\n\n\n\n- 在线验证者退出\n\n由于验证者余额低于16ETH或验证者请求退出，处于在线状态的验证者当前正在退出网络。\n\n\n<center><img src=\"https://i.ibb.co/kcbZFJm/p7-6d7a79f497.png\"/></center>\n\n\n\n\n\n- 离线验证者退出 (Exiting Offline)\n\n由于验证者余额低于16ETH或验证者请求退出，处于离线状态的验证者当前正在退出网络。\n\n<center><img src=\"https://i.ibb.co/dtNQ2YQ/p9-e037e8d446.png\"/></center>\n\n\n\n\n\n\n\n\n- 在线验证者罚没 (Slashing Online)\n\n在线验证者作恶，被驱逐出网络。\n\n<center><img src=\"https://i.ibb.co/SXvkrTr/p10-4844884221.png\"/></center>\n\n\n\n\n\n\n- 离线验证者罚没 (Slashing Online)\n\n验证者处于离线状态，但实施过恶意行径被驱除出网络。验证者正排队退出网络，需要等候至少25分钟。\n\n\n\n<center><img src=\"https://i.ibb.co/Pjy1Lfk/p11-8ac1e1fbe8.png\"/></center>\n\n\n\n\n- 被罚没(Slashed)\n\n验证者已被驱逐出网络，资金可在36天后提取。\n\n\n<center><img src=\"https://i.ibb.co/yfPWdZp/p12-6a9e8641f5.png\"/></center>\n\n\n\n\n\n- 已退出 (Exited)\n\n验证者已退出网络，资金可在一天后提取。\n\n<center><img src=\"https://i.ibb.co/RzSZb8W/p13-5b79eefe43.png\"/></center>\n\n\n \n\n <br/>\n\n <br/>\n\n声明：ECN的翻译工作旨在为中国以太坊社区传递优质资讯和学习资源，文章版权归原作者所有，转载须注明原文出处以及ethereum.cn，若需长期转载，请联系ethereumcn@gmail.com进行授权。\n\n## ","cover":{"childImageSharp":{"resize":{"src":"/static/ab586540a753276c6f3a435aaeba1a2e/2244e/5aa263dbc6ba96ccde13be10938666e6.jpg"}}}},"site":{"siteMetadata":{"title":"Ethereum Community Network","description":"以太坊——全球的、开源的去中心化应用平台。DeFi？NFT？游戏？虚拟世界？每一个人都可以成为以太坊的开发者和用户！","author":"@ECN以太坊社区网络","keywords":"以太坊,以太坊中国,Ethereum","siteLanguage":"zh-CN","siteLocale":"zh-cn","siteUrl":"http://ethereum.cn","twitterUsername":"@EthereumCN"}}},"pageContext":{"id":"Articles_126"}},"staticQueryHashes":["1238767529","2940180826"]}